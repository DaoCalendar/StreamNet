<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_201) on Fri Feb 21 16:49:00 CST 2020 -->
<title>AsyncTransactionPruner</title>
<meta name="date" content="2020-02-21">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AsyncTransactionPruner";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../../com/iota/iri/service/transactionpruning/async/JobQueue.html" title="interface in com.iota.iri.service.transactionpruning.async"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/iota/iri/service/transactionpruning/async/AsyncTransactionPruner.html" target="_top">Frames</a></li>
<li><a href="AsyncTransactionPruner.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.iota.iri.service.transactionpruning.async</div>
<h2 title="Class AsyncTransactionPruner" class="title">Class AsyncTransactionPruner</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.iota.iri.service.transactionpruning.async.AsyncTransactionPruner</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning">TransactionPruner</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">AsyncTransactionPruner</span>
extends java.lang.Object
implements <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning">TransactionPruner</a></pre>
<div class="block">This class implements the contract of the <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning"><code>TransactionPruner</code></a> while executing the jobs asynchronously in the
 background.

 To start the background processing of pruning tasks one has to make use of the additional <a href="../../../../../../com/iota/iri/service/transactionpruning/async/AsyncTransactionPruner.html#start--"><code>start()</code></a> and
 <a href="../../../../../../com/iota/iri/service/transactionpruning/async/AsyncTransactionPruner.html#shutdown--"><code>shutdown()</code></a> methods.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../../com/iota/iri/service/transactionpruning/async/AsyncTransactionPruner.html#AsyncTransactionPruner-com.iota.iri.storage.Tangle-com.iota.iri.controllers.TipsViewModel-com.iota.iri.service.snapshot.Snapshot-com.iota.iri.conf.SnapshotConfig-">AsyncTransactionPruner</a></span>(<a href="../../../../../../com/iota/iri/storage/Tangle.html" title="class in com.iota.iri.storage">Tangle</a>&nbsp;tangle,
                      <a href="../../../../../../com/iota/iri/controllers/TipsViewModel.html" title="class in com.iota.iri.controllers">TipsViewModel</a>&nbsp;tipsViewModel,
                      <a href="../../../../../../com/iota/iri/service/snapshot/Snapshot.html" title="interface in com.iota.iri.service.snapshot">Snapshot</a>&nbsp;snapshot,
                      <a href="../../../../../../com/iota/iri/conf/SnapshotConfig.html" title="interface in com.iota.iri.conf">SnapshotConfig</a>&nbsp;config)</code>
<div class="block">Creates a <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning"><code>TransactionPruner</code></a> that is able to process it's jobs asynchronously in the background and
 persists its state in a file on the hard disk of the node.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/iota/iri/service/transactionpruning/async/AsyncTransactionPruner.html#addJob-com.iota.iri.service.transactionpruning.TransactionPrunerJob-">addJob</a></span>(<a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPrunerJob.html" title="interface in com.iota.iri.service.transactionpruning">TransactionPrunerJob</a>&nbsp;job)</code>
<div class="block">This method adds a job to the TransactionPruner, that consequently can be executed by the <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html#processJobs--"><code>TransactionPruner.processJobs()</code></a>
 method.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/iota/iri/service/transactionpruning/async/AsyncTransactionPruner.html#clear--">clear</a></span>()</code>
<div class="block">This method removes all queued jobs and resets the state of the <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning"><code>TransactionPruner</code></a>.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/iota/iri/service/transactionpruning/async/AsyncTransactionPruner.html#processJobs--">processJobs</a></span>()</code>
<div class="block">This method executes all jobs that where added to the <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning"><code>TransactionPruner</code></a> through
 <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html#addJob-com.iota.iri.service.transactionpruning.TransactionPrunerJob-"><code>TransactionPruner.addJob(TransactionPrunerJob)</code></a>.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/iota/iri/service/transactionpruning/async/AsyncTransactionPruner.html#restoreState--">restoreState</a></span>()</code>
<div class="block">Restores the state of the <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning"><code>TransactionPruner</code></a> after being saved before by <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html#saveState--"><code>TransactionPruner.saveState()</code></a>.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/iota/iri/service/transactionpruning/async/AsyncTransactionPruner.html#saveState--">saveState</a></span>()</code>
<div class="block">This method saves the current state of the <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning"><code>TransactionPruner</code></a>, so it can later be restored by
 <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html#restoreState--"><code>TransactionPruner.restoreState()</code></a>.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/iota/iri/service/transactionpruning/async/AsyncTransactionPruner.html#shutdown--">shutdown</a></span>()</code>
<div class="block">Shuts down the background job by setting the corresponding shutdown flag.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../../com/iota/iri/service/transactionpruning/async/AsyncTransactionPruner.html#start--">start</a></span>()</code>
<div class="block">This method starts the cleanup and persistence <code>Thread</code>s that asynchronously process the queued jobs in the
 background.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AsyncTransactionPruner-com.iota.iri.storage.Tangle-com.iota.iri.controllers.TipsViewModel-com.iota.iri.service.snapshot.Snapshot-com.iota.iri.conf.SnapshotConfig-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AsyncTransactionPruner</h4>
<pre>public&nbsp;AsyncTransactionPruner(<a href="../../../../../../com/iota/iri/storage/Tangle.html" title="class in com.iota.iri.storage">Tangle</a>&nbsp;tangle,
                              <a href="../../../../../../com/iota/iri/controllers/TipsViewModel.html" title="class in com.iota.iri.controllers">TipsViewModel</a>&nbsp;tipsViewModel,
                              <a href="../../../../../../com/iota/iri/service/snapshot/Snapshot.html" title="interface in com.iota.iri.service.snapshot">Snapshot</a>&nbsp;snapshot,
                              <a href="../../../../../../com/iota/iri/conf/SnapshotConfig.html" title="interface in com.iota.iri.conf">SnapshotConfig</a>&nbsp;config)</pre>
<div class="block">Creates a <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning"><code>TransactionPruner</code></a> that is able to process it's jobs asynchronously in the background and
 persists its state in a file on the hard disk of the node.

 The asynchronous processing of the jobs is done through <code>Thread</code>s that are started and stopped by invoking
 the corresponding <a href="../../../../../../com/iota/iri/service/transactionpruning/async/AsyncTransactionPruner.html#start--"><code>start()</code></a> and <a href="../../../../../../com/iota/iri/service/transactionpruning/async/AsyncTransactionPruner.html#shutdown--"><code>shutdown()</code></a> methods. Since some of the builtin jobs require a
 special logic for the way they are executed, we register the builtin job types here.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tangle</code> - Tangle object which acts as a database interface</dd>
<dd><code>tipsViewModel</code> - manager for the tips (required for removing pruned transactions from this manager)</dd>
<dd><code>snapshot</code> - last local or global snapshot that acts as a starting point for the state of ledger</dd>
<dd><code>config</code> - Configuration with important snapshot related configuration parameters</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="addJob-com.iota.iri.service.transactionpruning.TransactionPrunerJob-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addJob</h4>
<pre>public&nbsp;void&nbsp;addJob(<a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPrunerJob.html" title="interface in com.iota.iri.service.transactionpruning">TransactionPrunerJob</a>&nbsp;job)
            throws <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruningException.html" title="class in com.iota.iri.service.transactionpruning">TransactionPruningException</a></pre>
<div class="block">This method adds a job to the TransactionPruner, that consequently can be executed by the <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html#processJobs--"><code>TransactionPruner.processJobs()</code></a>
 method.

 In addition to adding the jobs to the internal list of jobs that have to be executed, it informs the job about
 the <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning"><code>TransactionPruner</code></a>, the <a href="../../../../../../com/iota/iri/storage/Tangle.html" title="class in com.iota.iri.storage"><code>Tangle</code></a>, the
 <a href="../../../../../../com/iota/iri/controllers/TipsViewModel.html" title="class in com.iota.iri.controllers"><code>TipsViewModel</code></a> and the <a href="../../../../../../com/iota/iri/service/snapshot/Snapshot.html" title="interface in com.iota.iri.service.snapshot"><code>Snapshot</code></a> instances
 that this job is working on.

 It adds the job to its corresponding queue.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html#addJob-com.iota.iri.service.transactionpruning.TransactionPrunerJob-">addJob</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning">TransactionPruner</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>job</code> - the job that shall be executed</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruningException.html" title="class in com.iota.iri.service.transactionpruning">TransactionPruningException</a></code> - if anything goes wrong while adding the job</dd>
</dl>
</li>
</ul>
<a name="processJobs--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processJobs</h4>
<pre>public&nbsp;void&nbsp;processJobs()
                 throws <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruningException.html" title="class in com.iota.iri.service.transactionpruning">TransactionPruningException</a></pre>
<div class="block">This method executes all jobs that where added to the <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning"><code>TransactionPruner</code></a> through
 <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html#addJob-com.iota.iri.service.transactionpruning.TransactionPrunerJob-"><code>TransactionPruner.addJob(TransactionPrunerJob)</code></a>.

 The jobs will only be executed exactly once before being removed from the <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning"><code>TransactionPruner</code></a>.

 It iterates through all available queues and triggers the processing of their jobs.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html#processJobs--">processJobs</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning">TransactionPruner</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruningException.html" title="class in com.iota.iri.service.transactionpruning">TransactionPruningException</a></code> - if anything goes wrong while processing the cleanup jobs</dd>
</dl>
</li>
</ul>
<a name="saveState--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveState</h4>
<pre>public&nbsp;void&nbsp;saveState()</pre>
<div class="block">This method saves the current state of the <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning"><code>TransactionPruner</code></a>, so it can later be restored by
 <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html#restoreState--"><code>TransactionPruner.restoreState()</code></a>.

 It is used to maintain the state between IRI restarts and pick up pruning where it stopped when IRI shut down.

 We incorporate a background job that periodically saves the state rather than doing it "live", to reduce the cost
 of this operation. While this can theoretically lead to a situation where the saved state is not 100% correct and
 the latest changes get lost (if IRI crashes or gets restarted before the new changes could be persisted), the
 impact is marginal because it only leads to some floating "zombie" transactions that will stay in the database.
 This will be "solved" once we persist the changes in the database instead of a file on the hard disk. For now the
 trade off between faster processing times and leaving some garbage is reasonable.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html#saveState--">saveState</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning">TransactionPruner</a></code></dd>
</dl>
</li>
</ul>
<a name="restoreState--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreState</h4>
<pre>public&nbsp;void&nbsp;restoreState()
                  throws <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruningException.html" title="class in com.iota.iri.service.transactionpruning">TransactionPruningException</a></pre>
<div class="block">Restores the state of the <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning"><code>TransactionPruner</code></a> after being saved before by <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html#saveState--"><code>TransactionPruner.saveState()</code></a>.

 It is used to keep the state between IRI restarts and pick up pruning where it stopped when IRI shut down.

 It reads the state by parsing the state file and passing it into the registered parsers for each job type.

 Every line holds a job entry that starts with the fully qualified class name of the job followed by a ";" and the
 serialized representation of the job.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html#restoreState--">restoreState</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning">TransactionPruner</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruningException.html" title="class in com.iota.iri.service.transactionpruning">TransactionPruningException</a></code> - if anything goes wrong while restoring the state</dd>
</dl>
</li>
</ul>
<a name="clear--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre>public&nbsp;void&nbsp;clear()
           throws <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruningException.html" title="class in com.iota.iri.service.transactionpruning">TransactionPruningException</a></pre>
<div class="block">This method removes all queued jobs and resets the state of the <a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning"><code>TransactionPruner</code></a>. It can for example be
 used to cleanup after tests.

 It cycles through all registered <a href="../../../../../../com/iota/iri/service/transactionpruning/async/JobQueue.html" title="interface in com.iota.iri.service.transactionpruning.async"><code>JobQueue</code></a>s and clears them before persisting the state.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html#clear--">clear</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruner.html" title="interface in com.iota.iri.service.transactionpruning">TransactionPruner</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../../com/iota/iri/service/transactionpruning/TransactionPruningException.html" title="class in com.iota.iri.service.transactionpruning">TransactionPruningException</a></code> - if anything goes wrong while clearing the jobs</dd>
</dl>
</li>
</ul>
<a name="start--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre>public&nbsp;void&nbsp;start()</pre>
<div class="block">This method starts the cleanup and persistence <code>Thread</code>s that asynchronously process the queued jobs in the
 background.

 Note: This method is thread safe since we use a <a href="../../../../../../com/iota/iri/utils/thread/ThreadIdentifier.html" title="class in com.iota.iri.utils.thread"><code>ThreadIdentifier</code></a> to address the <code>Thread</code>. The
       <a href="../../../../../../com/iota/iri/utils/thread/ThreadUtils.html" title="class in com.iota.iri.utils.thread"><code>ThreadUtils</code></a> take care of only launching exactly one <code>Thread</code> that is not terminated.</div>
</li>
</ul>
<a name="shutdown--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>shutdown</h4>
<pre>public&nbsp;void&nbsp;shutdown()</pre>
<div class="block">Shuts down the background job by setting the corresponding shutdown flag.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../../../com/iota/iri/service/transactionpruning/async/JobQueue.html" title="interface in com.iota.iri.service.transactionpruning.async"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/iota/iri/service/transactionpruning/async/AsyncTransactionPruner.html" target="_top">Frames</a></li>
<li><a href="AsyncTransactionPruner.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
