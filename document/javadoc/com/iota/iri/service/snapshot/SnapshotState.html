<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_201) on Fri Feb 21 16:49:00 CST 2020 -->
<title>SnapshotState</title>
<meta name="date" content="2020-02-21">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SnapshotState";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/iota/iri/service/snapshot/SnapshotService.html" title="interface in com.iota.iri.service.snapshot"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/iota/iri/service/snapshot/SnapshotStateDiff.html" title="interface in com.iota.iri.service.snapshot"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/iota/iri/service/snapshot/SnapshotState.html" target="_top">Frames</a></li>
<li><a href="SnapshotState.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.iota.iri.service.snapshot</div>
<h2 title="Interface SnapshotState" class="title">Interface SnapshotState</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Subinterfaces:</dt>
<dd><a href="../../../../../com/iota/iri/service/snapshot/Snapshot.html" title="interface in com.iota.iri.service.snapshot">Snapshot</a></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../../com/iota/iri/service/snapshot/impl/SnapshotImpl.html" title="class in com.iota.iri.service.snapshot.impl">SnapshotImpl</a>, <a href="../../../../../com/iota/iri/service/snapshot/impl/SnapshotStateImpl.html" title="class in com.iota.iri.service.snapshot.impl">SnapshotStateImpl</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">SnapshotState</span></pre>
<div class="block">Represents the "state" of the ledger at a given time, which means how many IOTA are available on a certain address.

 It can either be a full ledger state which is used by the Snapshots or a differential State which carries only the
 resulting balances of the changed balances (see <a href="../../../../../com/iota/iri/service/snapshot/SnapshotState.html#patchedState-com.iota.iri.service.snapshot.SnapshotStateDiff-"><code>patchedState(SnapshotStateDiff)</code></a>).</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/iota/iri/service/snapshot/SnapshotState.html#applyStateDiff-com.iota.iri.service.snapshot.SnapshotStateDiff-">applyStateDiff</a></span>(<a href="../../../../../com/iota/iri/service/snapshot/SnapshotStateDiff.html" title="interface in com.iota.iri.service.snapshot">SnapshotStateDiff</a>&nbsp;diff)</code>
<div class="block">This method applies the given <a href="../../../../../com/iota/iri/service/snapshot/SnapshotStateDiff.html" title="interface in com.iota.iri.service.snapshot"><code>SnapshotStateDiff</code></a> to the current balances.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>java.lang.Long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/iota/iri/service/snapshot/SnapshotState.html#getBalance-com.iota.iri.model.Hash-">getBalance</a></span>(<a href="../../../../../com/iota/iri/model/Hash.html" title="interface in com.iota.iri.model">Hash</a>&nbsp;address)</code>
<div class="block">Returns the balance of a single address.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>java.util.Map&lt;<a href="../../../../../com/iota/iri/model/Hash.html" title="interface in com.iota.iri.model">Hash</a>,java.lang.Long&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/iota/iri/service/snapshot/SnapshotState.html#getBalances--">getBalances</a></span>()</code>
<div class="block">The <code>Map</code> returned by this method is a copy of the current state which guarantees that the object is only
 modified through its class methods.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/iota/iri/service/snapshot/SnapshotState.html#hasCorrectSupply--">hasCorrectSupply</a></span>()</code>
<div class="block">Checks if the state of the ledger has the correct supply by adding the balances of all addresses and comparing it
 against the expected value.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/iota/iri/service/snapshot/SnapshotState.html#isConsistent--">isConsistent</a></span>()</code>
<div class="block">Checks if the state is consistent, which means that there are no addresses with a negative balance.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../../com/iota/iri/service/snapshot/SnapshotState.html" title="interface in com.iota.iri.service.snapshot">SnapshotState</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/iota/iri/service/snapshot/SnapshotState.html#patchedState-com.iota.iri.service.snapshot.SnapshotStateDiff-">patchedState</a></span>(<a href="../../../../../com/iota/iri/service/snapshot/SnapshotStateDiff.html" title="interface in com.iota.iri.service.snapshot">SnapshotStateDiff</a>&nbsp;snapshotStateDiff)</code>
<div class="block">This method creates a differential SnapshotState that contains the resulting balances of only the addresses
 that are modified by the given <a href="../../../../../com/iota/iri/service/snapshot/SnapshotStateDiff.html" title="interface in com.iota.iri.service.snapshot"><code>SnapshotStateDiff</code></a>.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/iota/iri/service/snapshot/SnapshotState.html#update-com.iota.iri.service.snapshot.SnapshotState-">update</a></span>(<a href="../../../../../com/iota/iri/service/snapshot/SnapshotState.html" title="interface in com.iota.iri.service.snapshot">SnapshotState</a>&nbsp;newState)</code>
<div class="block">Replaces the state of this instance with the values of another state.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getBalance-com.iota.iri.model.Hash-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBalance</h4>
<pre>java.lang.Long&nbsp;getBalance(<a href="../../../../../com/iota/iri/model/Hash.html" title="interface in com.iota.iri.model">Hash</a>&nbsp;address)</pre>
<div class="block">Returns the balance of a single address.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>address</code> - address that shall be retrieved</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>balance of the address or <code>null</code> if the address is unknown.</dd>
</dl>
</li>
</ul>
<a name="getBalances--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBalances</h4>
<pre>java.util.Map&lt;<a href="../../../../../com/iota/iri/model/Hash.html" title="interface in com.iota.iri.model">Hash</a>,java.lang.Long&gt;&nbsp;getBalances()</pre>
<div class="block">The <code>Map</code> returned by this method is a copy of the current state which guarantees that the object is only
 modified through its class methods.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>map with the addresses associated to their balance</dd>
</dl>
</li>
</ul>
<a name="isConsistent--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isConsistent</h4>
<pre>boolean&nbsp;isConsistent()</pre>
<div class="block">Checks if the state is consistent, which means that there are no addresses with a negative balance.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the state is consistent and false otherwise</dd>
</dl>
</li>
</ul>
<a name="hasCorrectSupply--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasCorrectSupply</h4>
<pre>boolean&nbsp;hasCorrectSupply()</pre>
<div class="block">Checks if the state of the ledger has the correct supply by adding the balances of all addresses and comparing it
 against the expected value.

 It doesn't make sense to call this functions on differential states (returned by <a href="../../../../../com/iota/iri/service/snapshot/SnapshotState.html#patchedState-com.iota.iri.service.snapshot.SnapshotStateDiff-"><code>patchedState(SnapshotStateDiff)</code></a> that are used to check the consistency of patches.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the supply is correct and false otherwise</dd>
</dl>
</li>
</ul>
<a name="update-com.iota.iri.service.snapshot.SnapshotState-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre>void&nbsp;update(<a href="../../../../../com/iota/iri/service/snapshot/SnapshotState.html" title="interface in com.iota.iri.service.snapshot">SnapshotState</a>&nbsp;newState)</pre>
<div class="block">Replaces the state of this instance with the values of another state.

 This can for example be used to "reset" the state after a failed modification attempt while being able to keep
 the same instance.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newState</code> - the new state that shall overwrite the current one</dd>
</dl>
</li>
</ul>
<a name="applyStateDiff-com.iota.iri.service.snapshot.SnapshotStateDiff-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>applyStateDiff</h4>
<pre>void&nbsp;applyStateDiff(<a href="../../../../../com/iota/iri/service/snapshot/SnapshotStateDiff.html" title="interface in com.iota.iri.service.snapshot">SnapshotStateDiff</a>&nbsp;diff)
             throws <a href="../../../../../com/iota/iri/service/snapshot/SnapshotException.html" title="class in com.iota.iri.service.snapshot">SnapshotException</a></pre>
<div class="block">This method applies the given <a href="../../../../../com/iota/iri/service/snapshot/SnapshotStateDiff.html" title="interface in com.iota.iri.service.snapshot"><code>SnapshotStateDiff</code></a> to the current balances.

 Before applying the <a href="../../../../../com/iota/iri/service/snapshot/SnapshotStateDiff.html" title="interface in com.iota.iri.service.snapshot"><code>SnapshotStateDiff</code></a> we check if it is consistent.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>diff</code> - the balance changes that should be applied to this state.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../../../com/iota/iri/service/snapshot/SnapshotException.html" title="class in com.iota.iri.service.snapshot">SnapshotException</a></code> - if the <a href="../../../../../com/iota/iri/service/snapshot/SnapshotStateDiff.html" title="interface in com.iota.iri.service.snapshot"><code>SnapshotStateDiff</code></a> is inconsistent (see <a href="../../../../../com/iota/iri/service/snapshot/SnapshotStateDiff.html#isConsistent--"><code>SnapshotStateDiff.isConsistent()</code></a>)</dd>
</dl>
</li>
</ul>
<a name="patchedState-com.iota.iri.service.snapshot.SnapshotStateDiff-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>patchedState</h4>
<pre><a href="../../../../../com/iota/iri/service/snapshot/SnapshotState.html" title="interface in com.iota.iri.service.snapshot">SnapshotState</a>&nbsp;patchedState(<a href="../../../../../com/iota/iri/service/snapshot/SnapshotStateDiff.html" title="interface in com.iota.iri.service.snapshot">SnapshotStateDiff</a>&nbsp;snapshotStateDiff)</pre>
<div class="block">This method creates a differential SnapshotState that contains the resulting balances of only the addresses
 that are modified by the given <a href="../../../../../com/iota/iri/service/snapshot/SnapshotStateDiff.html" title="interface in com.iota.iri.service.snapshot"><code>SnapshotStateDiff</code></a>.

 It can be used to check if the modifications by a <a href="../../../../../com/iota/iri/service/snapshot/SnapshotStateDiff.html" title="interface in com.iota.iri.service.snapshot"><code>SnapshotStateDiff</code></a> will result in a consistent State
 where all modified addresses are still positive. Even though this State can be consistent, it will most probably
 not return true if we call <a href="../../../../../com/iota/iri/service/snapshot/SnapshotState.html#hasCorrectSupply--"><code>hasCorrectSupply()</code></a> since the unmodified addresses are missing.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>snapshotStateDiff</code> - the balance patches that we want to apply</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a differential SnapshotState that contains the resulting balances of all modified addresses</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/iota/iri/service/snapshot/SnapshotService.html" title="interface in com.iota.iri.service.snapshot"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/iota/iri/service/snapshot/SnapshotStateDiff.html" title="interface in com.iota.iri.service.snapshot"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/iota/iri/service/snapshot/SnapshotState.html" target="_top">Frames</a></li>
<li><a href="SnapshotState.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
