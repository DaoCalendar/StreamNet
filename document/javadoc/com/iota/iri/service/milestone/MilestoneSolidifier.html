<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_201) on Fri Feb 21 16:49:00 CST 2020 -->
<title>MilestoneSolidifier</title>
<meta name="date" content="2020-02-21">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MilestoneSolidifier";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/iota/iri/service/milestone/MilestoneSolidifier.html" target="_top">Frames</a></li>
<li><a href="MilestoneSolidifier.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.iota.iri.service.milestone</div>
<h2 title="Class MilestoneSolidifier" class="title">Class MilestoneSolidifier</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.iota.iri.service.milestone.MilestoneSolidifier</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">MilestoneSolidifier</span>
extends java.lang.Object</pre>
<div class="block">This class implements the logic for solidifying unsolid milestones.

 It manages a map of unsolid milestones to collect all milestones that have to be solidified. It then periodically
 issues checkSolidity calls on the earliest milestones to solidify them.

 To save resources and make the call a little bit more efficient, we cache the earliest milestones in a separate map,
 so the relatively expensive task of having to search for the next earliest milestone in the pool only has to be
 performed after a milestone has become solid or irrelevant for our node.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../com/iota/iri/service/milestone/MilestoneSolidifier.html#MilestoneSolidifier-com.iota.iri.service.snapshot.Snapshot-com.iota.iri.validator.TransactionValidator-">MilestoneSolidifier</a></span>(<a href="../../../../../com/iota/iri/service/snapshot/Snapshot.html" title="interface in com.iota.iri.service.snapshot">Snapshot</a>&nbsp;initialSnapshot,
                   <a href="../../../../../com/iota/iri/validator/TransactionValidator.html" title="class in com.iota.iri.validator">TransactionValidator</a>&nbsp;transactionValidator)</code>
<div class="block">Constructor of the class.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/iota/iri/service/milestone/MilestoneSolidifier.html#add-com.iota.iri.model.Hash-int-">add</a></span>(<a href="../../../../../com/iota/iri/model/Hash.html" title="interface in com.iota.iri.model">Hash</a>&nbsp;milestoneHash,
   int&nbsp;milestoneIndex)</code>
<div class="block">This method allows us to add new milestones to the solidifier.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/iota/iri/service/milestone/MilestoneSolidifier.html#shutdown--">shutdown</a></span>()</code>
<div class="block">This method shuts down the solidification thread.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/iota/iri/service/milestone/MilestoneSolidifier.html#start--">start</a></span>()</code>
<div class="block">This method starts the solidification <code>Thread</code> that asynchronously solidifies the milestones.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MilestoneSolidifier-com.iota.iri.service.snapshot.Snapshot-com.iota.iri.validator.TransactionValidator-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MilestoneSolidifier</h4>
<pre>public&nbsp;MilestoneSolidifier(<a href="../../../../../com/iota/iri/service/snapshot/Snapshot.html" title="interface in com.iota.iri.service.snapshot">Snapshot</a>&nbsp;initialSnapshot,
                           <a href="../../../../../com/iota/iri/validator/TransactionValidator.html" title="class in com.iota.iri.validator">TransactionValidator</a>&nbsp;transactionValidator)</pre>
<div class="block">Constructor of the class.

 It simply stores the passed in parameters to be able to access them later on.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>initialSnapshot</code> - initial Snapshot instance that is used by the node</dd>
<dd><code>transactionValidator</code> - TransactionValidator instance that is used by the node</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="add-com.iota.iri.model.Hash-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>add</h4>
<pre>public&nbsp;void&nbsp;add(<a href="../../../../../com/iota/iri/model/Hash.html" title="interface in com.iota.iri.model">Hash</a>&nbsp;milestoneHash,
                int&nbsp;milestoneIndex)</pre>
<div class="block">This method allows us to add new milestones to the solidifier.

 Before adding the given milestone we check if it is currently relevant for our node.

 Since this method might be called from a performance critical context, we simply add the milestone to a temporary
 pool, that gets examined later by the background process. This doesn't just speed up the addition of new jobs but
 also prevents us from having to synchronize the access to the underlying maps.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>milestoneHash</code> - Hash of the milestone that shall be solidified</dd>
<dd><code>milestoneIndex</code> - index of the milestone that shall be solidified</dd>
</dl>
</li>
</ul>
<a name="start--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre>public&nbsp;void&nbsp;start()</pre>
<div class="block">This method starts the solidification <code>Thread</code> that asynchronously solidifies the milestones.

 This method is thread safe since we use a <a href="../../../../../com/iota/iri/utils/thread/ThreadIdentifier.html" title="class in com.iota.iri.utils.thread"><code>ThreadIdentifier</code></a> to address the <code>Thread</code>. The
 <a href="../../../../../com/iota/iri/utils/thread/ThreadUtils.html" title="class in com.iota.iri.utils.thread"><code>ThreadUtils</code></a> take care of only launching exactly one <code>Thread</code> that is not terminated.</div>
</li>
</ul>
<a name="shutdown--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>shutdown</h4>
<pre>public&nbsp;void&nbsp;shutdown()</pre>
<div class="block">This method shuts down the solidification thread.

 It does not actively terminate the thread but sets the isInterrupted flag. Since we use a <a href="../../../../../com/iota/iri/utils/thread/ThreadIdentifier.html" title="class in com.iota.iri.utils.thread"><code>ThreadIdentifier</code></a>
 to address the <code>Thread</code>, this method is thread safe.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/iota/iri/service/milestone/MilestoneSolidifier.html" target="_top">Frames</a></li>
<li><a href="MilestoneSolidifier.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
